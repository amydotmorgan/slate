<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["shell","ruby"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="ruby">ruby</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://getrates-dev.avlr.sh/'>Sign Up for a Developer Key</a></li>
            <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id='introduction'>Introduction</h1>
<p>The TaxRates API provides a free rates lookup tool to allow merchants to retreive tax rates by location. 
This service is rate limited to 60 calls per minute, and ??? calls per month.</p>

          <h2 id='authentication'>Authentication</h2>
<p>Avalara uses API keys to allow access to the API. 
The API key is issued upon registering for an account. </p>

<p><aside class='notice'> A TaxRates API Key is required to call this service. </aside></p>

<p>You can get an API key at our <a href="http://getrates-dev.avlr.sh/">developer portal</a>.</p>
<h3 id='via-authorization-header'>Via Authorization Header:</h3>
<p>Avalara expects for the API key to be included in all API requests to the server in a header that looks like the following:</p>

<p><code class="prettyprint">Authorization: AvalaraApiKey meowmeowmeow</code></p>

<p>where <code class="prettyprint">meowmeowmeow</code> is replaced with your personal API key.</p>
<h3 id='alternate-method'>Alternate Method:</h3>
<p>You can pass the API key in the querystring as one of the parameters instead of 
passing it in a header. i.e:</p>

<p><code class="prettyprint">https://tax-dev.avlr.sh/api/rates?Line1=435+Ericksen+Ave+NE&amp;City=Bainbridge%20Island&amp;Region=WA&amp;PostalCode=98110&amp;apikey=meowmeowmeow</code></p>

<p>where <code class="prettyprint">meowmeowmeow</code> is replaced with your personal API key.</p>

          <h1 id='taxrates-api'>TaxRates API</h1><h2 id='rates-by-street-address'>Rates by Street Address</h2><pre class="highlight shell">curl <span class="s2">"https://api.taxrates.avalara.com/address?Line1=435+Ericksen+Ave+NE&amp;City=Bainbridge%20Island&amp;Region=WA&amp;PostalCode=98110"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: AvalaraApiKey meowmeowmeow"</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'json'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.taxrates.avalara.com/address?Line1=435+Ericksen+Ave+NE&amp;City=Bainbridge%20Island&amp;Region=WA&amp;PostalCode=98110"</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_PEER</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">request_uri</span><span class="p">,</span> 
    <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'AvalaraApiKey meowmeowmeow'</span><span class="p">)</span>
<span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="nf">body</span><span class="p">)</span>
</pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w"> 
   </span><span class="s2">"totalRate"</span><span class="p">:</span><span class="mf">9.500000</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rates"</span><span class="p">:[</span><span class="w"> 
      </span><span class="p">{</span><span class="w"> 
         </span><span class="s2">"rate"</span><span class="p">:</span><span class="mf">3.00000</span><span class="p">,</span><span class="w">
         </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"SEATTLE"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"City"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> 
         </span><span class="s2">"rate"</span><span class="p">:</span><span class="mf">6.500000</span><span class="p">,</span><span class="w">
         </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"WASHINGTON"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"State"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<h3 id='http-request'>HTTP Request</h3>
<p><code class="prettyprint">GET http://api.taxrates.avalara.com/address?&lt;address&gt;</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>street</td>
<td>Required</td>
<td>first line of the address</td>
<td>&ldquo;1101 Alaskan Way&rdquo;</td>
</tr>
<tr>
<td>city</td>
<td>Optional</td>
<td>city of the address</td>
<td>&ldquo;Seattle&rdquo;, &ldquo;Montreal&rdquo;, &ldquo;Bournemouth&rdquo;</td>
</tr>
<tr>
<td>state</td>
<td>Required</td>
<td>state  or region of the address</td>
<td>&ldquo;WA&rdquo;, &ldquo;QC&rdquo;, &ldquo;Washington&rdquo;, &ldquo;Quebec&rdquo;</td>
</tr>
<tr>
<td>country</td>
<td>Required</td>
<td>country code in ISO 3166-1 alpha-3 format</td>
<td>&ldquo;USA&rdquo;, &ldquo;CAN&rdquo;, &ldquo;GBR&rdquo;</td>
</tr>
<tr>
<td>postal</td>
<td>Optional</td>
<td>zip code of the address</td>
<td>&ldquo;98101&rdquo;, &ldquo;V8X 3X4&rdquo;, &ldquo;BH1 1AA&rdquo;</td>
</tr>
</tbody></table>
<h3 id='response-attributes'>Response Attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>totalRate</td>
<td>double</td>
<td>Contains the total tax rate for the location in question. Note that it is not a percentage; in the example above, the totalRate of 0.086 represents a tax rate of 8.6%.</td>
</tr>
<tr>
<td>rates</td>
<td>rate array</td>
<td>Each object in the rates array represents a single jurisdiction&rsquo;s contribution to the totalRate.</td>
</tr>
<tr>
<td>rate.rate</td>
<td>double</td>
<td>Note that a rate field may not always be present; in these cases, the contribution is 0.0%.</td>
</tr>
<tr>
<td>rate.name</td>
<td>string</td>
<td>TBD</td>
</tr>
<tr>
<td>rate.type</td>
<td>string</td>
<td>TBD</td>
</tr>
</tbody></table>
<h2 id='rates-by-zip-code'>Rates by Zip Code</h2><pre class="highlight shell">curl <span class="s2">"https://api.taxrates.avalara.com/address?country=USA&amp;postal=98101"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: AvalaraApiKey meowmeowmeow"</span> <span class="se">\</span>
  -H <span class="s2">"Accept: text/json"</span>
</pre>
<pre class="highlight ruby"><span class="nb">require</span> <span class="s1">'json'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s2">"https://api.taxrates.avalara.com/address?country=USA&amp;postal=98101"</span><span class="p">)</span>
<span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
<span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
<span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_PEER</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">request_uri</span><span class="p">,</span> 
    <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'AvalaraApiKey meowmeowmeow'</span><span class="p">)</span>
<span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="nf">body</span><span class="p">)</span>
</pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><span class="p">{</span><span class="w"> 
   </span><span class="s2">"totalRate"</span><span class="p">:</span><span class="mf">9.500000</span><span class="p">,</span><span class="w">
   </span><span class="s2">"rates"</span><span class="p">:[</span><span class="w"> 
      </span><span class="p">{</span><span class="w"> 
         </span><span class="s2">"rate"</span><span class="p">:</span><span class="mf">3.00000</span><span class="p">,</span><span class="w">
         </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"SEATTLE"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"City"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w"> 
         </span><span class="s2">"rate"</span><span class="p">:</span><span class="mf">6.500000</span><span class="p">,</span><span class="w">
         </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"WASHINGTON"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"type"</span><span class="p">:</span><span class="s2">"State"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre>
<h3 id='http-request'>HTTP Request</h3>
<p><code class="prettyprint">GET http://api.taxrates.avalara.com/postal?&lt;address&gt;</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>country</td>
<td>Required</td>
<td>country code in ISO 3166-1 alpha-3 format</td>
<td>&ldquo;USA&rdquo;, &ldquo;CAN&rdquo;, &ldquo;GBR&rdquo;</td>
</tr>
<tr>
<td>postal</td>
<td>Required</td>
<td>zip code of the address</td>
<td>&ldquo;98101&rdquo;, &ldquo;V8X 3X4&rdquo;, &ldquo;BH1 1AA&rdquo;</td>
</tr>
</tbody></table>
<h3 id='response-attributes'>Response Attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>totalRate</td>
<td>double</td>
<td>Contains the total tax rate for the location in question. Note that it is not a percentage; in the example above, the totalRate of 0.086 represents a tax rate of 8.6%.</td>
</tr>
<tr>
<td>rates</td>
<td>rate array</td>
<td>Each object in the rates array represents a single jurisdiction&rsquo;s contribution to the totalRate.</td>
</tr>
<tr>
<td>rate.rate</td>
<td>double</td>
<td>Note that a rate field may not always be present; in these cases, the contribution is 0.0%.</td>
</tr>
<tr>
<td>rate.name</td>
<td>string</td>
<td>TBD</td>
</tr>
<tr>
<td>rate.type</td>
<td>string</td>
<td>TBD</td>
</tr>
</tbody></table>

          <h1 id='errors'>Errors</h1>
<p>The TaxRates API uses the following error codes and messages:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Message</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Unable to resolve one or more document addresses</td>
</tr>
<tr>
<td></td>
<td>Value cannot be null. Parameter name: address</td>
</tr>
<tr>
<td></td>
<td>The postal code you provided was not valid. Please check your postal code before re-trying.</td>
</tr>
<tr>
<td>401</td>
<td>No authorization was provided. Please check the documentation to determine proper type for this API</td>
</tr>
<tr>
<td></td>
<td>The HTTP Authorization header you provided used an invalid scheme or the credentials were missing.</td>
</tr>
<tr>
<td></td>
<td>The credentials you provided were not accepted.</td>
</tr>
<tr>
<td></td>
<td>Your request provided two forms of authentication. Please check the documentation for the API to determine which form to use.</td>
</tr>
<tr>
<td>429</td>
<td>Rate limiting has been exceeded. Try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="ruby">ruby</a>
          </div>
      </div>
    </div>
  </body>
</html>
